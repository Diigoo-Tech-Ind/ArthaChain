<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Artha Public Schema Registry</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container { max-width: 1400px; margin: 0 auto; }
        .header {
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }
        h1 { color: #667eea; font-size: 36px; margin-bottom: 10px; }
        .subtitle { color: #666; font-size: 18px; }
        .schema-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
        }
        .schema-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s;
        }
        .schema-card:hover { transform: translateY(-5px); }
        .schema-name {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }
        .schema-version {
            display: inline-block;
            padding: 5px 15px;
            background: #4caf50;
            color: white;
            border-radius: 20px;
            font-size: 14px;
            margin-bottom: 15px;
        }
        .schema-version.deprecated {
            background: #ff9800;
        }
        .schema-info { margin-bottom: 15px; font-size: 14px; color: #666; }
        .schema-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s;
        }
        .btn-primary { background: #667eea; color: white; }
        .btn-primary:hover { background: #5568d3; }
        .btn-secondary { background: #e0e0e0; color: #333; }
        .btn-secondary:hover { background: #d0d0d0; }
        .deprecation-warning {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin-top: 15px;
            border-radius: 5px;
        }
        .api-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        .api-endpoint {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }
        .api-method {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 5px;
            font-weight: bold;
            margin-right: 10px;
        }
        .api-get { background: #4caf50; color: white; }
        .api-post { background: #2196f3; color: white; }
        .json-viewer {
            background: #263238;
            color: #aed581;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            overflow-x: auto;
            margin-top: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìö Artha Public Schema Registry</h1>
            <p class="subtitle">Browse, validate, and track all Artha Identity + AI schemas</p>
        </div>

        <div class="schema-grid" id="schema-grid">
            <!-- Schemas populated by JS -->
        </div>

        <div class="api-section">
            <h2 style="margin-bottom: 20px;">REST API Endpoints</h2>
            
            <div class="api-endpoint">
                <span class="api-method api-get">GET</span>
                /api/v1/schema/{name}
                <p style="margin-top: 10px; color: #666;">Get active version of a schema</p>
            </div>

            <div class="api-endpoint">
                <span class="api-method api-get">GET</span>
                /api/v1/schema/{name}/versions
                <p style="margin-top: 10px; color: #666;">List all versions of a schema</p>
            </div>

            <div class="api-endpoint">
                <span class="api-method api-get">GET</span>
                /api/v1/schema/{name}@{version}
                <p style="margin-top: 10px; color: #666;">Get specific schema version (JSON)</p>
            </div>

            <div class="api-endpoint">
                <span class="api-method api-get">GET</span>
                /api/v1/schema/{name}@{version}/status
                <p style="margin-top: 10px; color: #666;">Check deprecation status</p>
            </div>

            <div class="api-endpoint">
                <span class="api-method api-post">POST</span>
                /api/v1/schema/validate
                <p style="margin-top: 10px; color: #666;">Validate a document against a schema</p>
            </div>

            <h3 style="margin-top: 30px; margin-bottom: 15px;">Example Response:</h3>
            <div class="json-viewer">
{
  "name": "DIDDoc",
  "activeVersion": "v1",
  "versions": ["v1", "v1.1"],
  "deprecated": false,
  "schema": {
    "@schema": "artha://schema/DIDDoc@v1",
    "id": "string (did:artha:...)",
    "publicKey": [{
      "id": "string",
      "type": "Ed25519 | X25519",
      "key": "string (hex)"
    }],
    "service": [{
      "id": "string",
      "type": "string",
      "endpoint": "string (artha://...)"
    }],
    "proof": {
      "type": "Ed25519Signature2020",
      "created": "timestamp",
      "value": "string (hex)"
    }
  }
}
            </div>
        </div>
    </div>

    <script>
        const SCHEMAS = {
            DIDDoc: {
                activeVersion: 'v1',
                versions: ['v1'],
                deprecated: false,
                lastUpdated: '2025-11-02',
                description: 'Decentralized Identifier document for people, orgs, and nodes',
                fields: ['id', 'publicKey', 'service', 'proof'],
                sunsetEpoch: null
            },
            AIIDDoc: {
                activeVersion: 'v1',
                versions: ['v1'],
                deprecated: false,
                lastUpdated: '2025-11-02',
                description: 'AI Identity document for models, datasets, and agents',
                fields: ['id', 'model', 'datasetId', 'lineage', 'eval', 'signature'],
                sunsetEpoch: null
            },
            VC: {
                activeVersion: 'v1',
                versions: ['v1'],
                deprecated: false,
                lastUpdated: '2025-11-02',
                description: 'Verifiable Credential structure',
                fields: ['issuerDid', 'subjectDid', 'type', 'claim', 'docCid', 'issuedAt', 'expiresAt', 'proof'],
                sunsetEpoch: null
            },
            NodeCert: {
                activeVersion: 'v1',
                versions: ['v1'],
                deprecated: false,
                lastUpdated: '2025-11-02',
                description: 'Infrastructure node certificate',
                fields: ['nodePubkey', 'ownerDid', 'role', 'region', 'capabilities', 'slaId'],
                sunsetEpoch: null
            },
            JobSpec: {
                activeVersion: 'v1',
                versions: ['v1'],
                deprecated: false,
                lastUpdated: '2025-11-02',
                description: 'AI job specification',
                fields: ['jobId', 'aiid', 'datasetId', 'paramsHash', 'submitterDid'],
                sunsetEpoch: null
            }
        };

        function renderSchemas() {
            const grid = document.getElementById('schema-grid');
            grid.innerHTML = '';

            for (const [name, schema] of Object.entries(SCHEMAS)) {
                const card = document.createElement('div');
                card.className = 'schema-card';
                
                const statusClass = schema.deprecated ? 'deprecated' : '';
                const statusText = schema.deprecated ? 'DEPRECATED' : 'ACTIVE';

                card.innerHTML = `
                    <div class="schema-name">${name}</div>
                    <span class="schema-version ${statusClass}">${statusText} ‚Äî ${schema.activeVersion}</span>
                    <div class="schema-info">
                        <strong>Description:</strong> ${schema.description}
                    </div>
                    <div class="schema-info">
                        <strong>Fields:</strong> ${schema.fields.join(', ')}
                    </div>
                    <div class="schema-info">
                        <strong>Last Updated:</strong> ${schema.lastUpdated}
                    </div>
                    ${schema.deprecated ? `
                        <div class="deprecation-warning">
                            <strong>‚ö†Ô∏è Deprecation Notice</strong><br>
                            Sunset Date: ${new Date(schema.sunsetEpoch * 1000).toLocaleDateString()}<br>
                            Migrate to next version before this date.
                        </div>
                    ` : ''}
                    <div class="schema-actions">
                        <button class="btn btn-primary" onclick="downloadSchema('${name}', '${schema.activeVersion}')">
                            Download JSON
                        </button>
                        <button class="btn btn-secondary" onclick="viewDocs('${name}')">
                            View Docs
                        </button>
                    </div>
                `;

                grid.appendChild(card);
            }
        }

        function downloadSchema(name, version) {
            const schemaUrl = `/api/v1/schema/${name}@${version}`;
            window.open(schemaUrl, '_blank');
        }

        function viewDocs(name) {
            const docsUrl = `https://docs.arthachain.online/schemas/${name}`;
            window.open(docsUrl, '_blank');
        }

        // Initialize
        renderSchemas();
    </script>
</body>
</html>

